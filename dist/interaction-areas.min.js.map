{"version":3,"file":"interaction-areas.min.js","mappings":"+GAAA,IAAIA,EAAkB,EAAQ,MAG1BC,EAAc,OAelBC,EAAOC,QANP,SAAkBC,GAChB,OAAOA,EACHA,EAAOC,MAAM,EAAGL,EAAgBI,GAAU,GAAGE,QAAQL,EAAa,IAClEG,CACN,C,UCAAF,EAAOC,QAJP,WAEA,C,wHCdO,MAAMI,EAA6C,sBAE7CC,EAA2B,QAE3BC,EAAyC,8BAEzCC,EAA6B,CACxCC,SAAU,WACVC,UAAW,YACXC,IAAK,MACLC,OAAQ,UAGGC,EAA0B,CACrCC,QAAS,UACTC,SAAU,YAGCC,EAAiC,CAC5C,CAACR,EAA2BC,UAC1B,wFACF,CAACD,EAA2BE,WAC1B,yFACF,CAACF,EAA2BG,KAC1B,mFACF,CAACH,EAA2BI,QAC1B,uFAGSK,EACX,kGAEWC,EAAsC,KAEtCC,EAAqC,G,iBClClD,IAAIC,EAAW,EAAQ,KACnBC,EAAW,EAAQ,MACnBC,EAAW,EAAQ,MAMnBC,EAAa,qBAGbC,EAAa,aAGbC,EAAY,cAGZC,EAAeC,SA8CnB3B,EAAOC,QArBP,SAAkB2B,GAChB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAAIN,EAASM,GACX,OA1CM,IA4CR,GAAIP,EAASO,GAAQ,CACnB,IAAIC,EAAgC,mBAAjBD,EAAME,QAAwBF,EAAME,UAAYF,EACnEA,EAAQP,EAASQ,GAAUA,EAAQ,GAAMA,CAC3C,CACA,GAAoB,iBAATD,EACT,OAAiB,IAAVA,EAAcA,GAASA,EAEhCA,EAAQR,EAASQ,GACjB,IAAIG,EAAWP,EAAWQ,KAAKJ,GAC/B,OAAQG,GAAYN,EAAUO,KAAKJ,GAC/BF,EAAaE,EAAMzB,MAAM,GAAI4B,EAAW,EAAI,GAC3CR,EAAWS,KAAKJ,GAvDb,KAuD6BA,CACvC,C,iBC7DA,IAAIK,EAAO,EAAQ,MAsBnBjC,EAAOC,QAJG,WACR,OAAOgC,EAAKC,KAAKC,KACnB,C,yKClBO,MAAMC,EAAeC,IAAqD,IAApD,KAAEC,EAAI,QAAEC,EAAO,MAAEC,EAAQ,GAAE,aAAEC,EAAe,GAAGJ,EAC1E,OAAOK,EAAAA,EAAAA,IAAgB,CACrBC,IAAK,SACLC,KAAM,CAAEC,MAAO,yBAAyBL,KACxCD,UACAO,SAAU,CACR,CACEH,IAAK,MACLC,KAAM,CAAEC,MAAO,kBACfE,MAAO,CACL,qBAAsB,GAAGN,QAG7B,CACEE,IAAK,MACLC,KAAM,CAAEC,MAAO,WACfC,SAAUR,OClBLU,EACQ,oBCcfC,EAA2BA,CAACC,EAAMC,IAAUD,EAAKE,IAAMF,EAAKG,MAAQ,MAAMF,IAEnEG,EAAyBA,CAAAjB,EAEpCa,EACAC,EACAI,EACAhB,KACG,IALH,cAAEiB,EAAa,eAAEC,GAAgBpB,EAMjC,MAAMqB,GAAeC,EAAAA,EAAAA,GAAsBF,GACrCG,EACJJ,GAAiBA,EAAcK,OAASL,EAAcK,OAAOC,OAASJ,EAAaI,OAG/EtB,EAAQuB,IACZN,EACA,oCACA5C,EAAAA,GAAwBC,SAG1B,OAAO4B,EAAAA,EAAAA,IAAgB,CACrBC,IAAK,MACLC,KAAM,CACJC,MAAO,GAAGvC,EAAAA,iBAAuCkC,IACjD,UAAWS,EAAyBC,EAAMC,IAE5CJ,MAAO,CACLiB,KAAM,GAAGd,EAAKc,QACdC,IAAK,GAAGf,EAAKe,OACbC,MAAO,GAAGhB,EAAKgB,SACfC,OAAQ,GAAGjB,EAAKiB,UAChBC,mBAAoB,GAAGb,OAEzBc,MAAO,CACLC,KAAM,QACNC,SAAUhC,GAEZO,SAAU,CACR,CACEH,IAAK,MACLC,KAAM,CAAEC,MAAO,GAAGvC,EAAAA,kBAClBwC,SAAU,CACR,CACEH,IAAK,MACLC,KAAM,CAAEC,MAAO,GAAGvC,EAAAA,oBAClByC,MAAO,CACL,CAACP,IAAU3B,EAAAA,GAAwBE,SAAW,kBAAoB,eAChE6C,IAGN,CACEjB,IAAK,MACLC,KAAM,CAAEC,MAAO,GAAGvC,EAAAA,kBAClByC,MAAO,CAAEyB,YAAaZ,UAQrBa,EAAyBA,CAACC,EAAO9C,IAAU8C,GAAS,KAAO9C,GA8B3D+C,EAA+BA,CAACC,EAASC,KACpD,MAAMC,EAAmCC,EAA6BH,GAElEE,EACFA,EAAiCE,YAAYH,GAG7CD,EAAQK,KAAKC,YAAYL,IAIvBM,EAAgCA,CAACC,EAA2BlC,EAAMC,IACtEiC,EAA0BC,cAAc,YAAYpC,EAAyBC,EAAMC,OA4D/EmC,EAAoC,SAACC,GAA4B,IAAnBhD,EAAOiD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGG,IAC5DC,aAAaC,QAAQxF,EAAAA,GAA4CyF,KAAKC,MAAMR,IAC5EhD,GACF,EAoEMwC,EAA+BH,GACnCA,EAAQK,KAAKI,cAAc,IAAI9E,EAAAA,MAEpByF,EAAkCpB,IAC7C,MAAMQ,EAA4BL,EAA6BH,GAG/DQ,GACEA,EAA0Ba,WAAWC,YAAYd,I,wBCvO9C,MAAMe,EAA0BA,CAACC,EAAQ5C,EAAeC,KAC7D,IAAI4C,GAAW,EACXC,EAAgB,KAChBC,EAAe,KACfC,EAASb,IAEb,MAAMc,EAAsBA,KAAMC,OD0IOC,EC1IqBlD,EAAemD,mBD2IrD7C,IAAI4C,EAAwB,iBAAiB,IAGqB,SAArEf,aAAaiB,QAAQxG,EAAAA,IAJDsG,OCjIzC,SAASG,IAA2C,IAAjBC,EAAOvB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACxC,MAAMmB,EAAyBK,IAC/B,OAAOD,GAAYJ,GAA0BA,EAAuBM,MACtE,CAEA,SAASC,IACPX,GAAgBH,EAAOxB,QAAQuC,sBAAsBZ,GAErD,MAAMa,EAAYN,IACZH,EAAyBK,IAE/B,IAAKI,GAAaf,EAChB,OAAO,KAGT,GAAIgB,MAAMC,QAAQX,EAAuBY,UACvCC,EAAyBb,EAAuBY,UAChDE,QACK,CACL,MAAMC,EACJf,EAAuBe,QACvB1G,EAAAA,GAA+B2F,EAAuBY,UAEpDG,IACFnB,GAAeoB,EAAAA,EAAAA,IAAiBvB,EAAOxB,QAAS8C,GA8LtD,SAAwBE,GACtB,IAAKA,EACH,OAGF,IAAIC,EAAqB,KAEzBD,EAAME,iBAAiB,aAAa,KAClC,MAAMC,EAAYH,EAAMI,YAAcJ,EAAMI,WAAW,GAEvD,GAAID,EAAW,CACb,MAAMxE,EAAe0E,KAAKC,IACxBD,KAAKE,MAAkD,KAA3CJ,EAAUK,QAAUL,EAAUM,YAC1ClH,EAAAA,IAGImH,EAAaxC,KAAKC,MAAMgC,EAAUzF,MAExCkF,EAAyBc,EAAYT,EAAoBtE,IACxDsE,GAAsBJ,IACvBI,EAAqBS,CACvB,MACEtC,EAAgCI,EAAOxB,SACvCiD,EAAqB,OAG3B,CAvNMU,CAAehC,GAEnB,CACF,CAqBA,SAASS,IACP,MAAM,OAAEwB,GAAWlC,EACnB,OAAOkC,GAAUA,EAAOC,qBAC1B,CAEA,SAASC,IACP1C,EAAgCI,EAAOxB,SACvCsC,IACAd,EAAOuC,MACT,CAEA,SAASC,IACP,GAAK9B,IAIL,GAAIL,IAAuB,CACzB,IAAIoC,EAAsB,KAC1B,MAAMC,EAAsB/E,IAAIN,EAAgB,uCAAuC,GACvF2C,EAAO2C,QD0EqC,SAChDnE,EACArC,GAEG,IADHuG,EAAmBtD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAEfD,GAAU,EAEd,MAAMnC,EAAK,YAAY6E,KAAKe,MAAsB,IAAhBf,KAAKgB,YAEjCC,GAAkBxG,EAAAA,EAAAA,IAAgB,CACtCC,IAAK,MACLC,KAAM,CACJC,MAAO,GAAGtC,EAAAA,MAA0CD,EAAAA,qBAA2CwI,EAAsB,GAAK,eAE5HvG,QAAUuG,EAEN,KADA,IAAMxD,EAAkCC,EAAShD,GAErDO,SAAU,CACR,CACEH,IAAK,MACLC,KAAM,CAAEC,MAAO,GAAGvC,EAAAA,iBAAwC6I,IAAKlI,EAAAA,KAEjE,CACE0B,IAAK,KACLC,KAAM,CAAEC,MAAO,GAAGvC,EAAAA,2BAClBwC,SAAU,sCAEZV,EAAa,CACXE,KAAM,SACNE,MAAOQ,EACPP,aAAcqG,EAAsB,EAAI5H,EAAAA,GACxCqB,QAASuG,EACL,IAAMxD,EAAkCC,EAAShD,GACjD,OAENuG,GAAuB,CACrBnG,IAAK,MACLC,KAAM,CAAEC,MAAO,GAAGvC,EAAAA,iCAClBwC,SAAU,CACR,CACEH,IAAK,QACLC,KAAM,CACJS,KAAM,WACNR,MAAO,GAAGvC,EAAAA,6BACV8C,MAEFiB,MAAO,CACLC,KAAM,QACNC,SAAUF,IACRkB,EAAUlB,EAAM+E,OAAO7D,WAI7B,CACE5C,IAAK,QACLC,KAAM,CAAEC,MAAO,GAAGvC,EAAAA,mCAA0D+I,IAAKjG,GACjFN,SAAU,0BAIhBwG,QAAOC,GAAKA,MAGhB5E,EAA6BC,EAASsE,EACxC,CCxIMM,CACEpD,EAAOxB,SACP,KACE6E,aAAaZ,GACbH,MAEFI,GAGGA,IACHD,EAAsBa,WAAWhB,EAAqBxH,EAAAA,IAE1D,MACEwH,GAEJ,CA8CA,SAASiB,EAAOR,EAAKS,EAAW1G,GAC9B,MAAM2G,EAAsBzD,EAAO0D,cAC7BC,EA5IoBC,MAC1B,MAAMrD,EAAyBK,IAC/B,SAAOL,QAAoEjB,IAA1CiB,EAAuBsD,iBACpDtD,EAAuBsD,gBAyIFD,IACnB,OAAExB,GAAWlC,EACb4D,EAAoB1B,EAAO2B,iBAC3BC,EAASR,GAAa,CAAES,eAAgBH,EAAkBG,gBAC1DA,GAAkBlB,GDpGSmB,EAACC,EAAcC,KAClD,MAAM,YAAEC,EAAW,WAAEC,GAAeH,EAE9BI,EAAQlG,EAAuBiG,EAAYF,EAAoBxG,MAC/D4G,EAAQnG,EAAuBgG,EAAaD,EAAoBvG,KAChE4G,EAAYpG,EAAuBiG,EAAYF,EAAoBtG,OACnE4G,EAAarG,EAAuBgG,EAAaD,EAAoBrG,QAErE4G,EAAmBL,EAAaD,EAChCO,EAAkBH,EAAYC,EAE9B5G,EAAQ+D,KAAKe,MACjBgC,EAAkB,GAAKD,EAAmB,EAAID,EAAaE,EAAkBH,GAEzE1G,EAAS8D,KAAKe,MAAM9E,EAAQ6G,GAE5BE,EAAIhD,KAAKe,MAAM2B,GAASzG,EAAQ2G,GAAa,GAC7CK,EAAIjD,KAAKe,MAAM4B,GAASzG,EAAS2G,GAAc,GAErD,MAAO,CACL5G,QACAC,SACA8G,EAAGhD,KAAKkD,IAAIlD,KAAKC,IAAI+C,EAAG,GAAIP,EAAaxG,GACzCgH,EAAGjD,KAAKkD,IAAIlD,KAAKC,IAAIgD,EAAG,GAAIT,EAActG,GAC1CiH,KAAM,SC4EyBd,CAAsBlE,EAAOmE,aAAcrH,GACpEmI,EAAgBhB,EAAiBzF,EAAAA,EAAQ0G,IAAIC,MAAM,CAAElB,kBAAkBD,GAAUA,EAEjFoB,EAAYhD,EAAOiD,SAAWnF,EAAc6C,IAAM,CAAEuC,SAAUlD,EAAOkD,YAC3EtF,EAAOuF,OAAOtB,EAAiB,CAAEqB,SAAUlD,EAAOkD,YAAevC,EAAKkC,GAAe1C,OACrFoB,GAAoB3D,EAAO0D,YAAYD,GAEvCxD,GAAW,EAlHb,WACE,MAAMuF,GAASC,EAAAA,EAAAA,GAAc,MAAO,CAAEhJ,MAAO,mBAE7C+I,EAAO9D,iBACL,SACA,KACEtB,OAEF,GAGF,MAAM0C,GAAkB2C,EAAAA,EAAAA,GACtB,MACA,CAAEhJ,MAAOtC,EAAAA,IACTqL,GAEFjH,EAA6ByB,EAAOxB,QAASsE,EAC/C,CAmGE4C,GAEAtF,EAASA,KACP,GAAIH,EAAU,CACZA,GAAW,EACX,MAAM0F,EAAoB3F,EAAO0D,cAC3BkC,EAAW5F,EAAO4F,WACxB5F,EAAOuF,OAAOH,EAAWtB,GAAmBvB,OAC5CoB,GAAoBgC,EAAoBC,GAAY5F,EAAO0D,YAAYiC,GACvE7E,GACF,EAEJ,CAEA,SAAS+E,EAAuB5J,GAAyB,IAAxB,MAAEgC,EAAK,KAAEnB,EAAI,MAAEC,GAAOd,EACrD,MAAMsE,EAAyBK,IAE/BL,EAAuBpE,SACrBoE,EAAuBpE,QAAQ,CAC7BW,OACAC,QACAkB,QACA6H,KAAMA,CAACP,EAAQvB,KACbT,EAAOgC,EAAQvB,EAAQlH,KAG/B,CAEA,SAASsE,EACP2E,EACAC,GAEA,IADA7I,EAAYiC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAEf,MAAM6G,EAAU,CAAE7I,cAAeA,EAAeC,eAAgBA,GAEhE,GAAI2I,EDtGkCE,EACxC1H,EACAyH,EACAF,EACAC,EACA7I,EACAhB,KAEA,MAAM6C,EAA4BL,EAA6BH,GAE/DuH,EAAqBI,SAAQ,CAACrJ,EAAMC,KAClC,MAAMqJ,EAAcrH,EAA8BC,EAA2BlC,EAAMC,GAC7EsJ,EAASxJ,EAAyBC,GAClCwJ,EAAcN,EAA6BO,MAC/CpD,GAAKtG,EAAyBsG,KAAOkD,IAInCC,GAAeF,GACjBI,EAAAA,EAAAA,IAAaJ,EAAa,CACxBxI,KAAM,GAAGd,EAAKc,QACdC,IAAK,GAAGf,EAAKe,OACbC,MAAO,GAAGhB,EAAKgB,SACfC,OAAQ,GAAGjB,EAAKiB,UAChBC,mBAAoB,GAAGb,QAGfmJ,GAAgBF,GAE1BpH,EAA0BF,YACxB5B,EAAuB+I,EAASnJ,EAAMC,EAAOI,GAAcc,IACzD9B,EAAQ,CAAE8B,QAAOnB,OAAMC,iBAO/BiJ,EAA6BG,SAAQ,CAACrJ,EAAMC,KAC1C,MAAMqJ,EAAcrH,EAA8BC,EAA2BlC,EAAMC,GAC7EsJ,EAASxJ,EAAyBC,GAClC2J,GAAmBV,EAAqBQ,MAAKpD,GAAKtG,EAAyBsG,KAAOkD,IAEpFD,GAAeK,GAEjBL,EAAYvG,WAAWC,YAAYsG,OC0DnCF,CACElG,EAAOxB,QACPyH,EACAF,EACAC,EACA7I,EACA0I,OAEG,CACL,MAAMa,EAAwBX,EAAqBY,KAAI,CAAC7J,EAAMC,IACrDG,EAAuB+I,EAASnJ,EAAMC,EAAOI,GAAcc,IAChE4H,EAAwB,CAAE5H,QAAOnB,OAAMC,eAI3CwB,EACEyB,EAAOxB,SACPiH,EAAAA,EAAAA,GACE,MACA,CAAEhJ,MAAOtC,EAAAA,IACTuM,GAGN,CACF,CAEA,SAASrF,IACHX,KDUwCkG,EAACpI,EAAS2F,KACxD,MAAMnF,EAA4BL,EAA6BH,GAE/D,IAAKQ,EACH,OAGF,MAAM,YAAEqF,EAAW,WAAEC,GAAeH,EAC9BQ,EAAmBL,EAAaD,EAEhCvG,EAAQ6G,EAAmBR,EAAa0C,aAE9C7H,EAA0BrC,MAAMmB,MAAQ,GAAGqG,EAAa2C,YAAchJ,EAAQ,OAASA,MACvFkB,EAA0BrC,MAAMoB,OAC9BoG,EAAa2C,YAAchJ,EAAWqG,EAAa2C,YAAcnC,EAA9B,KAAqD,QCvBtFiC,CAAiC5G,EAAOxB,QAASwB,EAAOmE,aAE5D,EApHA,WAGE,GAFAjE,EAAgBA,GAAiBF,EAAOxB,QAAQ0B,gBAE5CQ,IAA6B,CAC/BV,EAAOxB,QAAQK,KAAKkI,UAAUC,IAAI,qBAElChH,EAAOxB,QAAQyI,IAAIC,EAAAA,EAAaC,MAAM,KACF,iBAAvBnH,EAAOxB,QAAQ4I,IAf9BpH,EAAOqH,GAAG,YAAY,KACpBrH,EAAOxB,QAAQ4I,IAAI1F,iBACjB4F,OAAOC,OAAOH,IAAII,QAAQC,KAAKC,kBAC/BlF,MAeEA,OAIJ,MAAMoE,EAAmCe,IAAStG,EAAkB,KAEpErB,EAAOxB,QAAQ6I,GAAGH,EAAAA,EAAaU,oBAAoB,KAEjDtE,WAAWsD,EAAkC,QAG/C,MAAMiB,GAAgBnG,EAAAA,EAAAA,IAAiB4F,OAAQ,SAAUjG,GAAkB,GAE3ErB,EAAOxB,QAAQ6I,GAAGH,EAAAA,EAAaY,QAASD,EAC1C,CAEA7H,EAAOxB,QAAQ6I,GAAGH,EAAAA,EAAaa,OAAO,KACpC3H,OAGFJ,EAAOxB,QAAQ6I,GAAGH,EAAAA,EAAac,OAAO,KACpChI,EAAO2C,UAEX,CAiHAsF,G,iBC3RF,IAAIhN,EAAW,EAAQ,MACnBc,EAAM,EAAQ,MACdmM,EAAW,EAAQ,MAMnBC,EAAYtG,KAAKC,IACjBsG,EAAYvG,KAAKkD,IAqLrBnL,EAAOC,QA7HP,SAAkBwO,EAAMC,EAAMC,GAC5B,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAiB,EACjBC,GAAU,EACVC,GAAS,EACTC,GAAW,EAEf,GAAmB,mBAARZ,EACT,MAAM,IAAIa,UAzEQ,uBAmFpB,SAASC,EAAWC,GAClB,IAAIC,EAAOb,EACPc,EAAUb,EAKd,OAHAD,EAAWC,OAAWnJ,EACtBwJ,EAAiBM,EACjBT,EAASN,EAAKkB,MAAMD,EAASD,EAE/B,CAqBA,SAASG,EAAaJ,GACpB,IAAIK,EAAoBL,EAAOP,EAM/B,YAAyBvJ,IAAjBuJ,GAA+BY,GAAqBnB,GACzDmB,EAAoB,GAAOT,GANJI,EAAON,GAM8BJ,CACjE,CAEA,SAASgB,IACP,IAAIN,EAAOrN,IACX,GAAIyN,EAAaJ,GACf,OAAOO,EAAaP,GAGtBR,EAAUtF,WAAWoG,EA3BvB,SAAuBN,GACrB,IAEIQ,EAActB,GAFMc,EAAOP,GAI/B,OAAOG,EACHZ,EAAUwB,EAAalB,GAJDU,EAAON,IAK7Bc,CACN,CAmBqCC,CAAcT,GACnD,CAEA,SAASO,EAAaP,GAKpB,OAJAR,OAAUtJ,EAIN2J,GAAYT,EACPW,EAAWC,IAEpBZ,EAAWC,OAAWnJ,EACfqJ,EACT,CAcA,SAASmB,IACP,IAAIV,EAAOrN,IACPgO,EAAaP,EAAaJ,GAM9B,GAJAZ,EAAWpJ,UACXqJ,EAAWuB,KACXnB,EAAeO,EAEXW,EAAY,CACd,QAAgBzK,IAAZsJ,EACF,OAzEN,SAAqBQ,GAMnB,OAJAN,EAAiBM,EAEjBR,EAAUtF,WAAWoG,EAAcpB,GAE5BS,EAAUI,EAAWC,GAAQT,CACtC,CAkEasB,CAAYpB,GAErB,GAAIG,EAIF,OAFA3F,aAAauF,GACbA,EAAUtF,WAAWoG,EAAcpB,GAC5Ba,EAAWN,EAEtB,CAIA,YAHgBvJ,IAAZsJ,IACFA,EAAUtF,WAAWoG,EAAcpB,IAE9BK,CACT,CAGA,OA3GAL,EAAOJ,EAASI,IAAS,EACrBrN,EAASsN,KACXQ,IAAYR,EAAQQ,QAEpBL,GADAM,EAAS,YAAaT,GACHJ,EAAUD,EAASK,EAAQG,UAAY,EAAGJ,GAAQI,EACrEO,EAAW,aAAcV,IAAYA,EAAQU,SAAWA,GAoG1Da,EAAUI,OApCV,gBACkB5K,IAAZsJ,GACFvF,aAAauF,GAEfE,EAAiB,EACjBN,EAAWK,EAAeJ,EAAWG,OAAUtJ,CACjD,EA+BAwK,EAAUK,MA7BV,WACE,YAAmB7K,IAAZsJ,EAAwBD,EAASgB,EAAa5N,IACvD,EA4BO+N,CACT,C,WC3LA,IAAIM,EAAe,KAiBnBxQ,EAAOC,QAPP,SAAyBC,GAGvB,IAFA,IAAIiD,EAAQjD,EAAOuF,OAEZtC,KAAWqN,EAAaxO,KAAK9B,EAAOuQ,OAAOtN,MAClD,OAAOA,CACT,C,iBChBA,IAAIuN,EAAW,EAAQ,MACnBrP,EAAW,EAAQ,MAmEvBrB,EAAOC,QAlBP,SAAkBwO,EAAMC,EAAMC,GAC5B,IAAIQ,GAAU,EACVE,GAAW,EAEf,GAAmB,mBAARZ,EACT,MAAM,IAAIa,UAnDQ,uBAyDpB,OAJIjO,EAASsN,KACXQ,EAAU,YAAaR,IAAYA,EAAQQ,QAAUA,EACrDE,EAAW,aAAcV,IAAYA,EAAQU,SAAWA,GAEnDqB,EAASjC,EAAMC,EAAM,CAC1B,QAAWS,EACX,QAAWT,EACX,SAAYW,GAEhB,C","sources":["webpack://cloudinary-video-player/../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseTrim.js","webpack://cloudinary-video-player/../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/noop.js","webpack://cloudinary-video-player/./plugins/interaction-areas/interaction-areas.const.js","webpack://cloudinary-video-player/../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/toNumber.js","webpack://cloudinary-video-player/../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/now.js","webpack://cloudinary-video-player/./components/themeButton/themedButton.js","webpack://cloudinary-video-player/./components/themeButton/themedButton.const.js","webpack://cloudinary-video-player/./plugins/interaction-areas/interaction-areas.utils.js","webpack://cloudinary-video-player/./plugins/interaction-areas/interaction-areas.service.js","webpack://cloudinary-video-player/../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/debounce.js","webpack://cloudinary-video-player/../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_trimmedEndIndex.js","webpack://cloudinary-video-player/../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/throttle.js"],"sourcesContent":["var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","export const INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME = 'cld-ia-layout-state';\n\nexport const INTERACTION_AREAS_PREFIX = 'vp-ia';\n\nexport const INTERACTION_AREAS_CONTAINER_CLASS_NAME = 'interaction-areas-container';\n\nexport const INTERACTION_AREAS_TEMPLATE = {\n  PORTRAIT: 'portrait',\n  LANDSCAPE: 'landscape',\n  All: 'all',\n  CENTER: 'center'\n};\n\nexport const INTERACTION_AREAS_THEME = {\n  PULSING: 'pulsing',\n  SHADOWED: 'shadowed'\n};\n\nexport const TEMPLATE_INTERACTION_AREAS_VTT = {\n  [INTERACTION_AREAS_TEMPLATE.PORTRAIT]:\n    'https://res.cloudinary.com/prod/raw/upload/v1623772481/video-player/vtts/portrait.vtt',\n  [INTERACTION_AREAS_TEMPLATE.LANDSCAPE]:\n    'https://res.cloudinary.com/prod/raw/upload/v1623772303/video-player/vtts/landscape.vtt',\n  [INTERACTION_AREAS_TEMPLATE.All]:\n    'https://res.cloudinary.com/prod/raw/upload/v1623250266/video-player/vtts/all.vtt',\n  [INTERACTION_AREAS_TEMPLATE.CENTER]:\n    'https://res.cloudinary.com/prod/raw/upload/v1623250265/video-player/vtts/center.vtt'\n};\n\nexport const INTERACTION_AREA_HAND_ICON =\n  'https://res.cloudinary.com/prod/image/upload/v1626764643/video-player/interaction-area-hand.svg';\n\nexport const CLOSE_INTERACTION_AREA_LAYOUT_DELAY = 4500;\n\nexport const DEFAULT_INTERACTION_ARE_TRANSITION = 250;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","import { elementsCreator } from '../../utils/dom';\n\nexport const themedButton = ({ text, onClick, theme = '', loadingDelay = 0 }) => {\n  return elementsCreator({\n    tag: 'button',\n    attr: { class: `vp-theme-button theme-${theme}` },\n    onClick,\n    children: [\n      {\n        tag: 'div',\n        attr: { class: 'vp-loading-bar' },\n        style: {\n          'animation-duration': `${loadingDelay}ms`\n        }\n      },\n      {\n        tag: 'div',\n        attr: { class: 'content' },\n        children: text\n      }\n    ]\n  });\n};\n","export const BUTTON_THEME = {\n  TRANSPARENT_WHITE: 'transparent-white'\n};\n","import get from 'lodash/get';\nimport noop from 'lodash/noop';\nimport { elementsCreator, styleElement } from '../../utils/dom';\nimport {\n  CLOSE_INTERACTION_AREA_LAYOUT_DELAY,\n  INTERACTION_AREA_HAND_ICON,\n  INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME,\n  INTERACTION_AREAS_CONTAINER_CLASS_NAME,\n  INTERACTION_AREAS_PREFIX,\n  INTERACTION_AREAS_THEME\n} from './interaction-areas.const';\nimport { getDefaultPlayerColor } from '../colors';\nimport { themedButton } from '../../components/themeButton/themedButton';\nimport { BUTTON_THEME } from '../../components/themeButton/themedButton.const';\n\nconst getInteractionAreaItemId = (item, index) => item.id || item.type || `id_${index}`;\n\nexport const getInteractionAreaItem = (\n  { playerOptions, videojsOptions },\n  item,\n  index,\n  durationTime,\n  onClick\n) => {\n  const defaultColor = getDefaultPlayerColor(videojsOptions);\n  const accentColor =\n    playerOptions && playerOptions.colors ? playerOptions.colors.accent : defaultColor.accent;\n\n  // theme = 'pulsing' / 'shadowed'\n  const theme = get(\n    videojsOptions,\n    'interactionDisplay.theme.template',\n    INTERACTION_AREAS_THEME.PULSING\n  );\n\n  return elementsCreator({\n    tag: 'div',\n    attr: {\n      class: `${INTERACTION_AREAS_PREFIX}-item theme-${theme}`,\n      'data-id': getInteractionAreaItemId(item, index)\n    },\n    style: {\n      left: `${item.left}%`,\n      top: `${item.top}%`,\n      width: `${item.width}%`,\n      height: `${item.height}%`,\n      transitionDuration: `${durationTime}ms`\n    },\n    event: {\n      name: 'click',\n      callback: onClick\n    },\n    children: [\n      {\n        tag: 'div',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-area-marker` },\n        children: [\n          {\n            tag: 'div',\n            attr: { class: `${INTERACTION_AREAS_PREFIX}-marker-shadow` },\n            style: {\n              [theme === INTERACTION_AREAS_THEME.SHADOWED ? 'backgroundColor' : 'borderColor']:\n                accentColor\n            }\n          },\n          {\n            tag: 'div',\n            attr: { class: `${INTERACTION_AREAS_PREFIX}-marker-main` },\n            style: { borderColor: accentColor }\n          }\n        ]\n      }\n    ]\n  });\n};\n\nexport const percentageToFixedValue = (outOf, value) => outOf / (100 / +value);\n\nexport const getZoomTransformation = (videoElement, interactionAreaItem) => {\n  const { videoHeight, videoWidth } = videoElement;\n\n  const itemX = percentageToFixedValue(videoWidth, interactionAreaItem.left);\n  const itemY = percentageToFixedValue(videoHeight, interactionAreaItem.top);\n  const itemWidth = percentageToFixedValue(videoWidth, interactionAreaItem.width);\n  const itemHeight = percentageToFixedValue(videoHeight, interactionAreaItem.height);\n\n  const videoAspectRatio = videoWidth / videoHeight;\n  const itemAspectRatio = itemWidth / itemHeight;\n\n  const width = Math.round(\n    itemAspectRatio > 1 || videoAspectRatio > 1 ? itemHeight * itemAspectRatio : itemWidth\n  );\n  const height = Math.round(width / videoAspectRatio);\n\n  const x = Math.round(itemX - (width - itemWidth) / 2);\n  const y = Math.round(itemY - (height - itemHeight) / 2);\n\n  return {\n    width,\n    height,\n    x: Math.min(Math.max(x, 0), videoWidth - width),\n    y: Math.min(Math.max(y, 0), videoHeight - height),\n    crop: 'crop'\n  };\n};\n\nexport const setInteractionAreasContainer = (videojs, newInteractionAreasContainer) => {\n  const currentInteractionAreasContainer = getInteractionAreasContainer(videojs);\n\n  if (currentInteractionAreasContainer) {\n    currentInteractionAreasContainer.replaceWith(newInteractionAreasContainer);\n  } else {\n    // do not use element.append for ie11 support\n    videojs.el().appendChild(newInteractionAreasContainer);\n  }\n};\n\nconst getInteractionAreaElementById = (interactionAreasContainer, item, index) =>\n  interactionAreasContainer.querySelector(`[data-id=${getInteractionAreaItemId(item, index)}]`);\n\nexport const updateInteractionAreasItem = (\n  videojs,\n  configs,\n  interactionAreasData,\n  previousInteractionAreasData,\n  durationTime,\n  onClick\n) => {\n  const interactionAreasContainer = getInteractionAreasContainer(videojs);\n\n  interactionAreasData.forEach((item, index) => {\n    const itemElement = getInteractionAreaElementById(interactionAreasContainer, item, index);\n    const itemId = getInteractionAreaItemId(item);\n    const isExistItem = previousInteractionAreasData.some(\n      i => getInteractionAreaItemId(i) === itemId\n    );\n\n    // in case the element of the item is in the dom and exist in the previous data , it update the element position\n    if (isExistItem && itemElement) {\n      styleElement(itemElement, {\n        left: `${item.left}%`,\n        top: `${item.top}%`,\n        width: `${item.width}%`,\n        height: `${item.height}%`,\n        transitionDuration: `${durationTime}ms`\n      });\n      // if the element did not exist before , not in the dom and not in the previous data , it add a new element\n    } else if (!isExistItem && !itemElement) {\n      // do not use element.append for ie11 support\n      interactionAreasContainer.appendChild(\n        getInteractionAreaItem(configs, item, index, durationTime, event => {\n          onClick({ event, item, index });\n        })\n      );\n    }\n  });\n\n  // checking the previous data for element that should be removed if not exist in the new data object.\n  previousInteractionAreasData.forEach((item, index) => {\n    const itemElement = getInteractionAreaElementById(interactionAreasContainer, item, index);\n    const itemId = getInteractionAreaItemId(item);\n    const shouldBeRemoved = !interactionAreasData.some(i => getInteractionAreaItemId(i) === itemId);\n\n    if (itemElement && shouldBeRemoved) {\n      // do not use element.remove for ie11 support\n      itemElement.parentNode.removeChild(itemElement);\n    }\n  });\n};\n\nexport const shouldShowAreaLayoutMessage = interactionAreasConfig => {\n  const isLayoutEnabled = get(interactionAreasConfig, 'layout.enable', true);\n\n  return (\n    isLayoutEnabled && localStorage.getItem(INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME) !== 'true'\n  );\n};\n\nconst onClickInteractionAreaLayoutClick = (checked, onClick = noop) => {\n  localStorage.setItem(INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME, JSON.parse(checked));\n  onClick();\n};\n\nexport const createInteractionAreaLayoutMessage = (\n  videojs,\n  onClick,\n  showItAgainCheckbox = false\n) => {\n  let checked = false;\n\n  const id = `checkbox_${Math.round(Math.random() * 10000)}`;\n\n  const tracksContainer = elementsCreator({\n    tag: 'div',\n    attr: {\n      class: `${INTERACTION_AREAS_CONTAINER_CLASS_NAME} ${INTERACTION_AREAS_PREFIX}-layout-message ${showItAgainCheckbox ? '' : 'clickable'}`\n    },\n    onClick: !showItAgainCheckbox\n      ? () => onClickInteractionAreaLayoutClick(checked, onClick)\n      : null,\n    children: [\n      {\n        tag: 'img',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-icon`, src: INTERACTION_AREA_HAND_ICON }\n      },\n      {\n        tag: 'h3',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-message-title` },\n        children: 'Tap on dots to zoom for a product.'\n      },\n      themedButton({\n        text: 'Got it',\n        theme: BUTTON_THEME.TRANSPARENT_WHITE,\n        loadingDelay: showItAgainCheckbox ? 0 : CLOSE_INTERACTION_AREA_LAYOUT_DELAY,\n        onClick: showItAgainCheckbox\n          ? () => onClickInteractionAreaLayoutClick(checked, onClick)\n          : null\n      }),\n      showItAgainCheckbox && {\n        tag: 'div',\n        attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-message-do-not-show` },\n        children: [\n          {\n            tag: 'input',\n            attr: {\n              type: 'checkbox',\n              class: `${INTERACTION_AREAS_PREFIX}-layout-message-checkbox`,\n              id\n            },\n            event: {\n              name: 'input',\n              callback: event => {\n                checked = event.target.checked;\n              }\n            }\n          },\n          {\n            tag: 'label',\n            attr: { class: `${INTERACTION_AREAS_PREFIX}-layout-message-checkbox-title`, for: id },\n            children: 'Don׳t show it again'\n          }\n        ]\n      }\n    ].filter(i => i)\n  });\n\n  setInteractionAreasContainer(videojs, tracksContainer);\n};\n\nconst getInteractionAreasContainer = videojs =>\n  videojs.el().querySelector(`.${INTERACTION_AREAS_CONTAINER_CLASS_NAME}`);\n\nexport const removeInteractionAreasContainer = videojs => {\n  const interactionAreasContainer = getInteractionAreasContainer(videojs);\n\n  // do not use element.remove for ie11 support\n  interactionAreasContainer &&\n    interactionAreasContainer.parentNode.removeChild(interactionAreasContainer);\n};\n\nexport const setInteractionAreasContainerSize = (videojs, videoElement) => {\n  const interactionAreasContainer = getInteractionAreasContainer(videojs);\n\n  if (!interactionAreasContainer) {\n    return;\n  }\n\n  const { videoHeight, videoWidth } = videoElement;\n  const videoAspectRatio = videoWidth / videoHeight;\n\n  const width = videoAspectRatio * videoElement.clientHeight;\n\n  interactionAreasContainer.style.width = `${videoElement.clientWidth < width ? '100%' : width}px`;\n  interactionAreasContainer.style.height =\n    videoElement.clientWidth < width ? `${videoElement.clientWidth / videoAspectRatio}px` : '100%';\n};\n","import videojs from 'video.js';\nimport get from 'lodash/get';\nimport throttle from 'lodash/throttle';\nimport noop from 'lodash/noop';\nimport {\n  CLOSE_INTERACTION_AREA_LAYOUT_DELAY,\n  DEFAULT_INTERACTION_ARE_TRANSITION,\n  INTERACTION_AREAS_CONTAINER_CLASS_NAME,\n  TEMPLATE_INTERACTION_AREAS_VTT\n} from './interaction-areas.const';\nimport {\n  createInteractionAreaLayoutMessage,\n  getInteractionAreaItem,\n  getZoomTransformation,\n  removeInteractionAreasContainer,\n  setInteractionAreasContainer,\n  setInteractionAreasContainerSize,\n  shouldShowAreaLayoutMessage,\n  updateInteractionAreasItem\n} from './interaction-areas.utils';\nimport { addEventListener, createElement } from '../../utils/dom';\nimport { addMetadataTrack } from '../../video-player.utils';\nimport { PLAYER_EVENT } from '../../utils/consts';\n\nimport './interaction-areas.scss';\n\nexport const interactionAreasService = (player, playerOptions, videojsOptions) => {\n  let isZoomed = false;\n  let currentSource = null;\n  let currentTrack = null;\n  let unZoom = noop;\n\n  const shouldLayoutMessage = () => shouldShowAreaLayoutMessage(videojsOptions.interactionDisplay);\n\n  const getIsSyncOffsetTime = () => {\n    const interactionAreasConfig = getInteractionAreasConfig();\n    return interactionAreasConfig && interactionAreasConfig.syncOffsetTime !== undefined\n      ? interactionAreasConfig.syncOffsetTime\n      : false;\n  };\n\n  function isInteractionAreasEnabled(enabled = false) {\n    const interactionAreasConfig = getInteractionAreasConfig();\n    return enabled || (interactionAreasConfig && interactionAreasConfig.enable);\n  }\n\n  function setAreasPositionListener() {\n    currentTrack && player.videojs.removeRemoteTextTrack(currentTrack);\n\n    const isEnabled = isInteractionAreasEnabled();\n    const interactionAreasConfig = getInteractionAreasConfig();\n\n    if (!isEnabled || isZoomed) {\n      return null;\n    }\n\n    if (Array.isArray(interactionAreasConfig.template)) {\n      addInteractionAreasItems(interactionAreasConfig.template);\n      setContainerSize();\n    } else {\n      const vttUrl =\n        interactionAreasConfig.vttUrl ||\n        TEMPLATE_INTERACTION_AREAS_VTT[interactionAreasConfig.template];\n\n      if (vttUrl) {\n        currentTrack = addMetadataTrack(player.videojs, vttUrl);\n        addCueListener(currentTrack);\n      }\n    }\n  }\n\n  function setGoBackButton() {\n    const button = createElement('div', { class: 'go-back-button' });\n\n    button.addEventListener(\n      'click',\n      () => {\n        unZoom();\n      },\n      false\n    );\n\n    const tracksContainer = createElement(\n      'div',\n      { class: INTERACTION_AREAS_CONTAINER_CLASS_NAME },\n      button\n    );\n    setInteractionAreasContainer(player.videojs, tracksContainer);\n  }\n\n  function getInteractionAreasConfig() {\n    const { cldSrc } = currentSource;\n    return cldSrc && cldSrc.getInteractionAreas();\n  }\n\n  function removeLayoutMessage() {\n    removeInteractionAreasContainer(player.videojs);\n    setAreasPositionListener();\n    player.play();\n  }\n\n  function setLayoutMessage() {\n    if (!isInteractionAreasEnabled()) {\n      return;\n    }\n\n    if (shouldLayoutMessage()) {\n      let layoutMessageTimout = null;\n      const showItAgainCheckbox = get(videojsOptions, 'interactionDisplay.layout.showAgain', false);\n      player.pause();\n\n      createInteractionAreaLayoutMessage(\n        player.videojs,\n        () => {\n          clearTimeout(layoutMessageTimout);\n          removeLayoutMessage();\n        },\n        showItAgainCheckbox\n      );\n\n      if (!showItAgainCheckbox) {\n        layoutMessageTimout = setTimeout(removeLayoutMessage, CLOSE_INTERACTION_AREA_LAYOUT_DELAY);\n      }\n    } else {\n      removeLayoutMessage();\n    }\n  }\n\n  function handleAds() {\n    player.on('adsready', () => {\n      player.videojs.ima.addEventListener(\n        window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,\n        setLayoutMessage\n      );\n    });\n  }\n\n  function init() {\n    currentSource = currentSource || player.videojs.currentSource();\n\n    if (isInteractionAreasEnabled()) {\n      player.videojs.el().classList.add('interaction-areas');\n\n      player.videojs.one(PLAYER_EVENT.PLAY, () => {\n        if (typeof player.videojs.ima === 'object') {\n          handleAds();\n        } else {\n          setLayoutMessage();\n        }\n      });\n\n      const setInteractionAreasContainerSize = throttle(setContainerSize, 100);\n\n      player.videojs.on(PLAYER_EVENT.FULL_SCREEN_CHANGE, () => {\n        // waiting for fullscreen will end\n        setTimeout(setInteractionAreasContainerSize, 100);\n      });\n\n      const resizeDestroy = addEventListener(window, 'resize', setContainerSize, false);\n\n      player.videojs.on(PLAYER_EVENT.DISPOSE, resizeDestroy);\n    }\n\n    player.videojs.on(PLAYER_EVENT.ENDED, () => {\n      unZoom();\n    });\n\n    player.videojs.on(PLAYER_EVENT.ERROR, () => {\n      player.pause();\n    });\n  }\n\n  function onZoom(src, newOption, item) {\n    const originalCurrentTime = player.currentTime();\n    const isSyncOffsetTime = getIsSyncOffsetTime();\n    const { cldSrc } = currentSource;\n    const currentSrcOptions = cldSrc.getInitOptions();\n    const option = newOption || { transformation: currentSrcOptions.transformation };\n    const transformation = !src && getZoomTransformation(player.videoElement, item);\n    const sourceOptions = transformation ? videojs.obj.merge({ transformation }, option) : option;\n\n    const newSource = cldSrc.isRawUrl ? currentSource.src : { publicId: cldSrc.publicId() };\n    player.source(transformation ? { publicId: cldSrc.publicId() } : src, sourceOptions).play();\n    isSyncOffsetTime && player.currentTime(originalCurrentTime);\n\n    isZoomed = true;\n\n    setGoBackButton();\n\n    unZoom = () => {\n      if (isZoomed) {\n        isZoomed = false;\n        const currentZoomedTime = player.currentTime();\n        const duration = player.duration();\n        player.source(newSource, currentSrcOptions).play();\n        isSyncOffsetTime && currentZoomedTime < duration && player.currentTime(currentZoomedTime);\n        setAreasPositionListener();\n      }\n    };\n  }\n\n  function onInteractionAreasClick({ event, item, index }) {\n    const interactionAreasConfig = getInteractionAreasConfig();\n\n    interactionAreasConfig.onClick &&\n      interactionAreasConfig.onClick({\n        item,\n        index,\n        event,\n        zoom: (source, option) => {\n          onZoom(source, option, item);\n        }\n      });\n  }\n\n  function addInteractionAreasItems(\n    interactionAreasData,\n    previousInteractionAreasData,\n    durationTime = 0\n  ) {\n    const configs = { playerOptions: playerOptions, videojsOptions: videojsOptions };\n\n    if (previousInteractionAreasData) {\n      updateInteractionAreasItem(\n        player.videojs,\n        configs,\n        interactionAreasData,\n        previousInteractionAreasData,\n        durationTime,\n        onInteractionAreasClick\n      );\n    } else {\n      const interactionAreasItems = interactionAreasData.map((item, index) => {\n        return getInteractionAreaItem(configs, item, index, durationTime, event => {\n          onInteractionAreasClick({ event, item, index });\n        });\n      });\n\n      setInteractionAreasContainer(\n        player.videojs,\n        createElement(\n          'div',\n          { class: INTERACTION_AREAS_CONTAINER_CLASS_NAME },\n          interactionAreasItems\n        )\n      );\n    }\n  }\n\n  function setContainerSize() {\n    if (isInteractionAreasEnabled()) {\n      setInteractionAreasContainerSize(player.videojs, player.videoElement);\n    }\n  }\n\n  function addCueListener(track) {\n    if (!track) {\n      return;\n    }\n\n    let previousTracksData = null;\n\n    track.addEventListener('cuechange', () => {\n      const activeCue = track.activeCues && track.activeCues[0];\n\n      if (activeCue) {\n        const durationTime = Math.max(\n          Math.floor((activeCue.endTime - activeCue.startTime) * 1000),\n          DEFAULT_INTERACTION_ARE_TRANSITION\n        );\n\n        const tracksData = JSON.parse(activeCue.text);\n\n        addInteractionAreasItems(tracksData, previousTracksData, durationTime);\n        !previousTracksData && setContainerSize();\n        previousTracksData = tracksData;\n      } else {\n        removeInteractionAreasContainer(player.videojs);\n        previousTracksData = null;\n      }\n    });\n  }\n\n  init();\n};\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n"],"names":["trimmedEndIndex","reTrimStart","module","exports","string","slice","replace","INTERACTION_AREA_LAYOUT_LOCAL_STORAGE_NAME","INTERACTION_AREAS_PREFIX","INTERACTION_AREAS_CONTAINER_CLASS_NAME","INTERACTION_AREAS_TEMPLATE","PORTRAIT","LANDSCAPE","All","CENTER","INTERACTION_AREAS_THEME","PULSING","SHADOWED","TEMPLATE_INTERACTION_AREAS_VTT","INTERACTION_AREA_HAND_ICON","CLOSE_INTERACTION_AREA_LAYOUT_DELAY","DEFAULT_INTERACTION_ARE_TRANSITION","baseTrim","isObject","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","value","other","valueOf","isBinary","test","root","Date","now","themedButton","_ref","text","onClick","theme","loadingDelay","elementsCreator","tag","attr","class","children","style","BUTTON_THEME","getInteractionAreaItemId","item","index","id","type","getInteractionAreaItem","durationTime","playerOptions","videojsOptions","defaultColor","getDefaultPlayerColor","accentColor","colors","accent","get","left","top","width","height","transitionDuration","event","name","callback","borderColor","percentageToFixedValue","outOf","setInteractionAreasContainer","videojs","newInteractionAreasContainer","currentInteractionAreasContainer","getInteractionAreasContainer","replaceWith","el","appendChild","getInteractionAreaElementById","interactionAreasContainer","querySelector","onClickInteractionAreaLayoutClick","checked","arguments","length","undefined","noop","localStorage","setItem","JSON","parse","removeInteractionAreasContainer","parentNode","removeChild","interactionAreasService","player","isZoomed","currentSource","currentTrack","unZoom","shouldLayoutMessage","shouldShowAreaLayoutMessage","interactionAreasConfig","interactionDisplay","getItem","isInteractionAreasEnabled","enabled","getInteractionAreasConfig","enable","setAreasPositionListener","removeRemoteTextTrack","isEnabled","Array","isArray","template","addInteractionAreasItems","setContainerSize","vttUrl","addMetadataTrack","track","previousTracksData","addEventListener","activeCue","activeCues","Math","max","floor","endTime","startTime","tracksData","addCueListener","cldSrc","getInteractionAreas","removeLayoutMessage","play","setLayoutMessage","layoutMessageTimout","showItAgainCheckbox","pause","round","random","tracksContainer","src","target","for","filter","i","createInteractionAreaLayoutMessage","clearTimeout","setTimeout","onZoom","newOption","originalCurrentTime","currentTime","isSyncOffsetTime","getIsSyncOffsetTime","syncOffsetTime","currentSrcOptions","getInitOptions","option","transformation","getZoomTransformation","videoElement","interactionAreaItem","videoHeight","videoWidth","itemX","itemY","itemWidth","itemHeight","videoAspectRatio","itemAspectRatio","x","y","min","crop","sourceOptions","obj","merge","newSource","isRawUrl","publicId","source","button","createElement","setGoBackButton","currentZoomedTime","duration","onInteractionAreasClick","zoom","interactionAreasData","previousInteractionAreasData","configs","updateInteractionAreasItem","forEach","itemElement","itemId","isExistItem","some","styleElement","shouldBeRemoved","interactionAreasItems","map","setInteractionAreasContainerSize","clientHeight","clientWidth","classList","add","one","PLAYER_EVENT","PLAY","ima","on","window","google","AdEvent","Type","ALL_ADS_COMPLETED","throttle","FULL_SCREEN_CHANGE","resizeDestroy","DISPOSE","ENDED","ERROR","init","toNumber","nativeMax","nativeMin","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","this","leadingEdge","cancel","flush","reWhitespace","charAt","debounce"],"sourceRoot":""}