(self.cloudinaryVideoPlayerChunkLoading=self.cloudinaryVideoPlayerChunkLoading||[]).push([[404],{212:(t,e,n)=>{var i=n(5428),o=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(o,""):t}},546:t=>{t.exports=function(){}},1456:(t,e,n)=>{"use strict";n.d(e,{F0:()=>r,Fg:()=>a,IT:()=>s,T$:()=>l,Vv:()=>d,Yx:()=>c,be:()=>o,q3:()=>u,sb:()=>i});const i="cld-ia-layout-state",o="vp-ia",a="interaction-areas-container",r={PORTRAIT:"portrait",LANDSCAPE:"landscape",All:"all",CENTER:"center"},s={PULSING:"pulsing",SHADOWED:"shadowed"},c={[r.PORTRAIT]:"https://res.cloudinary.com/prod/raw/upload/v1623772481/video-player/vtts/portrait.vtt",[r.LANDSCAPE]:"https://res.cloudinary.com/prod/raw/upload/v1623772303/video-player/vtts/landscape.vtt",[r.All]:"https://res.cloudinary.com/prod/raw/upload/v1623250266/video-player/vtts/all.vtt",[r.CENTER]:"https://res.cloudinary.com/prod/raw/upload/v1623250265/video-player/vtts/center.vtt"},l="https://res.cloudinary.com/prod/image/upload/v1626764643/video-player/interaction-area-hand.svg",d=4500,u=250},2746:(t,e,n)=>{var i=n(212),o=n(9185),a=n(8110),r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=s.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):r.test(t)?NaN:+t}},3224:(t,e,n)=>{var i=n(2273);t.exports=function(){return i.Date.now()}},4137:(t,e,n)=>{"use strict";n.d(e,{interactionAreasService:()=>k});var i=n(1998),o=n(9640),a=n.n(o),r=n(9378),s=n.n(r),c=n(546),l=n.n(c),d=n(1456),u=n(8423),v=n(7951);const p=t=>{let{text:e,onClick:n,theme:i="",loadingDelay:o=0}=t;return(0,u.It)({tag:"button",attr:{class:`vp-theme-button theme-${i}`},onClick:n,children:[{tag:"div",attr:{class:"vp-loading-bar"},style:{"animation-duration":`${o}ms`}},{tag:"div",attr:{class:"content"},children:e}]})},h="transparent-white",f=(t,e)=>t.id||t.type||`id_${e}`,m=(t,e,n,i,o)=>{let{playerOptions:r,videojsOptions:s}=t;const c=(0,v.w)(s),l=r&&r.colors?r.colors.accent:c.accent,p=a()(s,"interactionDisplay.theme.template",d.IT.PULSING);return(0,u.It)({tag:"div",attr:{class:`${d.be}-item theme-${p}`,"data-id":f(e,n)},style:{left:`${e.left}%`,top:`${e.top}%`,width:`${e.width}%`,height:`${e.height}%`,transitionDuration:`${i}ms`},event:{name:"click",callback:o},children:[{tag:"div",attr:{class:`${d.be}-area-marker`},children:[{tag:"div",attr:{class:`${d.be}-marker-shadow`},style:{[p===d.IT.SHADOWED?"backgroundColor":"borderColor"]:l}},{tag:"div",attr:{class:`${d.be}-marker-main`},style:{borderColor:l}}]}]})},g=(t,e)=>t/(100/+e),y=(t,e)=>{const n=$(t);n?n.replaceWith(e):t.el().appendChild(e)},b=(t,e,n)=>t.querySelector(`[data-id=${f(e,n)}]`),T=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();localStorage.setItem(d.sb,JSON.parse(t)),e()},$=t=>t.el().querySelector(`.${d.Fg}`),x=t=>{const e=$(t);e&&e.parentNode.removeChild(e)};var E=n(8885),w=n(4147);const k=(t,e,n)=>{let o=!1,r=null,c=null,v=l();const k=()=>{return t=n.interactionDisplay,a()(t,"layout.enable",!0)&&"true"!==localStorage.getItem(d.sb);var t};function C(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=A();return t||e&&e.enable}function j(){c&&t.videojs.removeRemoteTextTrack(c);const e=C(),n=A();if(!e||o)return null;if(Array.isArray(n.template))N(n.template),L();else{const e=n.vttUrl||d.Yx[n.template];e&&(c=(0,E.eo)(t.videojs,e),function(e){if(!e)return;let n=null;e.addEventListener("cuechange",(()=>{const i=e.activeCues&&e.activeCues[0];if(i){const t=Math.max(Math.floor(1e3*(i.endTime-i.startTime)),d.q3),e=JSON.parse(i.text);N(e,n,t),!n&&L(),n=e}else x(t.videojs),n=null}))}(c))}}function A(){const{cldSrc:t}=r;return t&&t.getInteractionAreas()}function D(){x(t.videojs),j(),t.play()}function I(){if(C())if(k()){let e=null;const i=a()(n,"interactionDisplay.layout.showAgain",!1);t.pause(),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;const o=`checkbox_${Math.round(1e4*Math.random())}`,a=(0,u.It)({tag:"div",attr:{class:`${d.Fg} ${d.be}-layout-message ${n?"":"clickable"}`},onClick:n?null:()=>T(i,e),children:[{tag:"img",attr:{class:`${d.be}-layout-icon`,src:d.T$}},{tag:"h3",attr:{class:`${d.be}-layout-message-title`},children:"Tap on dots to zoom for a product."},p({text:"Got it",theme:h,loadingDelay:n?0:d.Vv,onClick:n?()=>T(i,e):null}),n&&{tag:"div",attr:{class:`${d.be}-layout-message-do-not-show`},children:[{tag:"input",attr:{type:"checkbox",class:`${d.be}-layout-message-checkbox`,id:o},event:{name:"input",callback:t=>{i=t.target.checked}}},{tag:"label",attr:{class:`${d.be}-layout-message-checkbox-title`,for:o},children:"Don×³t show it again"}]}].filter((t=>t))});y(t,a)}(t.videojs,(()=>{clearTimeout(e),D()}),i),i||(e=setTimeout(D,d.Vv))}else D()}function S(e,n,a){const s=t.currentTime(),c=(()=>{const t=A();return!(!t||void 0===t.syncOffsetTime)&&t.syncOffsetTime})(),{cldSrc:l}=r,p=l.getInitOptions(),h=n||{transformation:p.transformation},f=!e&&((t,e)=>{const{videoHeight:n,videoWidth:i}=t,o=g(i,e.left),a=g(n,e.top),r=g(i,e.width),s=g(n,e.height),c=i/n,l=r/s,d=Math.round(l>1||c>1?s*l:r),u=Math.round(d/c),v=Math.round(o-(d-r)/2),p=Math.round(a-(u-s)/2);return{width:d,height:u,x:Math.min(Math.max(v,0),i-d),y:Math.min(Math.max(p,0),n-u),crop:"crop"}})(t.videoElement,a),m=f?i.A.obj.merge({transformation:f},h):h,b=l.isRawUrl?r.src:{publicId:l.publicId()};t.source(f?{publicId:l.publicId()}:e,m).play(),c&&t.currentTime(s),o=!0,function(){const e=(0,u.n)("div",{class:"go-back-button"});e.addEventListener("click",(()=>{v()}),!1);const n=(0,u.n)("div",{class:d.Fg},e);y(t.videojs,n)}(),v=()=>{if(o){o=!1;const e=t.currentTime(),n=t.duration();t.source(b,p).play(),c&&e<n&&t.currentTime(e),j()}}}function O(t){let{event:e,item:n,index:i}=t;const o=A();o.onClick&&o.onClick({item:n,index:i,event:e,zoom:(t,e)=>{S(t,e,n)}})}function N(i,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={playerOptions:e,videojsOptions:n};if(o)((t,e,n,i,o,a)=>{const r=$(t);n.forEach(((t,n)=>{const s=b(r,t,n),c=f(t),l=i.some((t=>f(t)===c));l&&s?(0,u.cu)(s,{left:`${t.left}%`,top:`${t.top}%`,width:`${t.width}%`,height:`${t.height}%`,transitionDuration:`${o}ms`}):l||s||r.appendChild(m(e,t,n,o,(e=>{a({event:e,item:t,index:n})})))})),i.forEach(((t,e)=>{const i=b(r,t,e),o=f(t),a=!n.some((t=>f(t)===o));i&&a&&i.parentNode.removeChild(i)}))})(t.videojs,r,i,o,a,O);else{const e=i.map(((t,e)=>m(r,t,e,a,(n=>{O({event:n,item:t,index:e})}))));y(t.videojs,(0,u.n)("div",{class:d.Fg},e))}}function L(){C()&&((t,e)=>{const n=$(t);if(!n)return;const{videoHeight:i,videoWidth:o}=e,a=o/i,r=a*e.clientHeight;n.style.width=`${e.clientWidth<r?"100%":r}px`,n.style.height=e.clientWidth<r?e.clientWidth/a+"px":"100%"})(t.videojs,t.videoElement)}!function(){if(r=r||t.videojs.currentSource(),C()){t.videojs.el().classList.add("interaction-areas"),t.videojs.one(w.f.PLAY,(()=>{"object"==typeof t.videojs.ima?t.on("adsready",(()=>{t.videojs.ima.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,I)})):I()}));const e=s()(L,100);t.videojs.on(w.f.FULL_SCREEN_CHANGE,(()=>{setTimeout(e,100)}));const n=(0,u.q2)(window,"resize",L,!1);t.videojs.on(w.f.DISPOSE,n)}t.videojs.on(w.f.ENDED,(()=>{v()})),t.videojs.on(w.f.ERROR,(()=>{t.pause()}))}()}},5353:(t,e,n)=>{var i=n(9185),o=n(3224),a=n(2746),r=Math.max,s=Math.min;t.exports=function(t,e,n){var c,l,d,u,v,p,h=0,f=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=c,i=l;return c=l=void 0,h=e,u=t.apply(i,n)}function b(t){var n=t-p;return void 0===p||n>=e||n<0||m&&t-h>=d}function T(){var t=o();if(b(t))return $(t);v=setTimeout(T,function(t){var n=e-(t-p);return m?s(n,d-(t-h)):n}(t))}function $(t){return v=void 0,g&&c?y(t):(c=l=void 0,u)}function x(){var t=o(),n=b(t);if(c=arguments,l=this,p=t,n){if(void 0===v)return function(t){return h=t,v=setTimeout(T,e),f?y(t):u}(p);if(m)return clearTimeout(v),v=setTimeout(T,e),y(p)}return void 0===v&&(v=setTimeout(T,e)),u}return e=a(e)||0,i(n)&&(f=!!n.leading,d=(m="maxWait"in n)?r(a(n.maxWait)||0,e):d,g="trailing"in n?!!n.trailing:g),x.cancel=function(){void 0!==v&&clearTimeout(v),h=0,c=p=l=v=void 0},x.flush=function(){return void 0===v?u:$(o())},x}},5428:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},9378:(t,e,n)=>{var i=n(5353),o=n(9185);t.exports=function(t,e,n){var a=!0,r=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,r="trailing"in n?!!n.trailing:r),i(t,e,{leading:a,maxWait:e,trailing:r})}}}]);
//# sourceMappingURL=interaction-areas.min.js.map