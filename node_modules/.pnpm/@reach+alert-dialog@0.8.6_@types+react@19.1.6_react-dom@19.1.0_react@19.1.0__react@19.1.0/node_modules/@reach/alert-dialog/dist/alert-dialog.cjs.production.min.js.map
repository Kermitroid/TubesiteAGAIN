{"version":3,"file":"alert-dialog.cjs.production.min.js","sources":["../src/index.tsx"],"sourcesContent":["/**\n * Welcome to @reach/alert-dialog!\n *\n * A modal dialog that interrupts the user's workflow to get a response, usually\n * some sort of confirmation. This is different than a typical Dialog in that it\n * requires some user response, like \"Save\", or \"Cancel\", etc.\n *\n * Most of the time you'll use `AlertDialog`, `AlertDialogLabel`, and\n * `AlertDialogDescription` together. If you need more control over the styling\n * of the modal you can drop down a level and use `AlertDialogOverlay` and\n * `AlertDialogContent` instead of `AlertDialog`.\n *\n * When a Dialog opens, the _least destructive_ action should be focused so that\n * if a user accidentally hits enter when the dialog opens no damage is done.\n * This is accomplished with the `leastDestructiveRef` prop.\n *\n * Every dialog must render an `AlertDialogLabel` so the screen reader knows\n * what to say about the dialog. If an `AlertDialogDescription` is also\n * rendered, the screen reader will also announce that. If you render more than\n * these two elements and some buttons, the screen reader might not announce it\n * so it's important to keep the content inside of `AlertDialogLabel` and\n * `AlertDialogDescription`.\n *\n * This is built on top of [Dialog](/dialog), so `AlertDialog` spreads its props\n * and renders a `Dialog`, same for `AlertDialogOverlay` to `DialogOverlay`, and\n * `AlertDialogContent` to `DialogContent`.\n *\n * @see Docs     https://reacttraining.com/reach-ui/alert-dialog\n * @see Source   https://github.com/reach/reach-ui/tree/master/packages/alert-dialog\n * @see WAI-ARIA https://www.w3.org/TR/wai-aria-practices-1.1/#alertdialog\n */\n\nimport React, { forwardRef, useContext, useEffect, useRef } from \"react\";\nimport {\n  DialogOverlay,\n  DialogContent,\n  DialogProps,\n  DialogContentProps,\n} from \"@reach/dialog\";\nimport { useId } from \"@reach/auto-id\";\nimport {\n  getOwnerDocument,\n  createNamedContext,\n  makeId,\n  useForkedRef,\n} from \"@reach/utils\";\nimport invariant from \"invariant\";\nimport PropTypes from \"prop-types\";\n\nlet AlertDialogContext = createNamedContext<IAlertDialogContext>(\n  \"AlertDialogContext\",\n  {} as IAlertDialogContext\n);\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * AlertDialogOverlay\n *\n * Low-level component if you need more control over the styles or rendering of\n * the dialog overlay. In the following example we use the AlertDialogOverlay\n * and AlertDialogContent to have more control over the styles.\n *\n * Note: You must render an `AlertDialogContent` inside.\n *\n * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialogoverlay\n */\nexport const AlertDialogOverlay = forwardRef<HTMLDivElement, AlertDialogProps>(\n  function AlertDialogOverlay({ leastDestructiveRef, ...props }, forwardedRef) {\n    let ownRef = useRef<HTMLDivElement | null>(null);\n    let ref = useForkedRef(forwardedRef, ownRef);\n    let id = useId(props.id);\n    let labelId = id ? makeId(\"alert-dialog\", id) : undefined;\n    let descriptionId = id ? makeId(\"alert-dialog-description\", id) : undefined;\n\n    return (\n      <AlertDialogContext.Provider\n        value={{\n          labelId,\n          descriptionId,\n          overlayRef: ownRef,\n          leastDestructiveRef,\n        }}\n      >\n        <DialogOverlay\n          {...props}\n          ref={ref}\n          data-reach-alert-dialog-overlay\n          initialFocusRef={leastDestructiveRef}\n        />\n      </AlertDialogContext.Provider>\n    );\n  }\n);\n\nif (__DEV__) {\n  AlertDialogOverlay.displayName = \"AlertDialogOverlay\";\n  AlertDialogOverlay.propTypes = {\n    isOpen: PropTypes.bool,\n    onDismiss: PropTypes.func,\n    leastDestructiveRef: () => null,\n    children: PropTypes.node,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * AlertDialogContent\n *\n * Low-level component if you need more control over the styles or rendering of\n * the dialog content.\n *\n * Note: Must be a child of `AlertDialogOverlay`.\n *\n * Note: You only need to use this when you are also styling\n * `AlertDialogOverlay`, otherwise you can use the high-level `AlertDialog`\n * component and pass the props to it.\n *\n * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialogcontent\n */\nexport const AlertDialogContent = forwardRef<\n  HTMLDivElement,\n  AlertDialogContentProps\n>(function AlertDialogContent({ children, ...props }, forwardRef) {\n  let { labelId, leastDestructiveRef, overlayRef } = useContext(\n    AlertDialogContext\n  );\n  useEffect(() => {\n    let ownerDocument = getOwnerDocument(overlayRef.current) || document;\n    if (labelId) {\n      invariant(\n        ownerDocument.getElementById(labelId),\n        `@reach/alert-dialog: You must render a \\`<AlertDialogLabel>\\`\n          inside an \\`<AlertDialog/>\\`.`\n      );\n    }\n    invariant(\n      leastDestructiveRef,\n      `@reach/alert-dialog: You must provide a \\`leastDestructiveRef\\` to\n          \\`<AlertDialog>\\` or \\`<AlertDialogOverlay/>\\`. Please see\n          https://ui.reach.tech/alert-dialog/#alertdialogoverlay-leastdestructiveref`\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [labelId, leastDestructiveRef]);\n  return (\n    <DialogContent\n      role=\"alertdialog\"\n      aria-labelledby={labelId}\n      {...props}\n      ref={forwardRef}\n      // lol: remove in 1.0\n      data-reach-alert-dialong-content\n      data-reach-alert-dialog-content\n    >\n      {children}\n    </DialogContent>\n  );\n});\n\n/**\n * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialogcontent-props\n */\nexport type AlertDialogContentProps = {\n  /**\n   * Accepts any renderable content but should generally be restricted to\n   * `AlertDialogLabel`, `AlertDialogDescription` and action buttons, other\n   * content might not be announced to the user by the screen reader.\n   *\n   * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialogcontent-children\n   */\n  children: React.ReactNode;\n} & DialogContentProps;\n\nif (__DEV__) {\n  AlertDialogContent.displayName = \"AlertDialogContent\";\n  AlertDialogContent.propTypes = {\n    children: PropTypes.node,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * AlertDialogLabel\n *\n * The first thing ready by screen readers when the dialog opens, usually the\n * title of the dialog like \"Warning!\" or \"Please confirm!\".\n *\n * This is required. The `AlertDialog` will throw an error if no label is\n * rendered.\n *\n * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialoglabel\n */\nexport const AlertDialogLabel: React.FC<React.HTMLAttributes<\n  HTMLDivElement\n>> = props => {\n  const { labelId } = useContext(AlertDialogContext);\n  return <div {...props} id={labelId} data-reach-alert-dialog-label />;\n};\n\nif (__DEV__) {\n  AlertDialogLabel.displayName = \"AlertDialogLabel\";\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * AlertDialogDescription\n *\n * Additional content read by screen readers, usually a longer description\n * about what you need from the user like \"This action is permanent, are you\n * sure?\" etc.\n *\n * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialogdescription\n * @param props\n */\nexport const AlertDialogDescription: React.FC<React.HTMLAttributes<\n  HTMLDivElement\n>> = props => {\n  const { descriptionId } = useContext(AlertDialogContext);\n  return (\n    <div {...props} id={descriptionId} data-reach-alert-dialog-description />\n  );\n};\n\nif (__DEV__) {\n  AlertDialogDescription.displayName = \"AlertDialogDescription\";\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * AlertDialog\n *\n * High-level component to render an alert dialog.\n *\n * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialog\n * @param props\n */\nexport const AlertDialog: React.FC<AlertDialogProps> = ({\n  id,\n  isOpen,\n  onDismiss,\n  leastDestructiveRef,\n  ...props\n}) => {\n  return (\n    <AlertDialogOverlay {...{ isOpen, onDismiss, leastDestructiveRef, id }}>\n      <AlertDialogContent {...props} />\n    </AlertDialogOverlay>\n  );\n};\n\n/**\n * @see Docs https://reacttraining.com/reach-ui/alert-dialog#alertdialog-props\n */\nexport type AlertDialogProps = {\n  /**\n   * Controls whether the dialog is open or not.\n   *\n   * @see Docs: https://reacttraining.com/reach-ui/alert-dialog#alertdialog-isopen\n   */\n  isOpen?: boolean;\n  /**\n   * When the user clicks outside the modal or hits the escape key,\n   * this function will be called. If you want the modal to close,\n   * youâ€™ll need to set state.\n   *\n   * @see Docs: https://reacttraining.com/reach-ui/alert-dialog#alertdialog-ondismiss\n   */\n  onDismiss?: (event?: React.SyntheticEvent) => void;\n  /**\n   * To prevent accidental data loss, an alert dialog should focus the least\n   * destructive action button when it opens.\n   *\n   * @see Docs: https://reacttraining.com/reach-ui/alert-dialog#alertdialog-leastdestructiveref\n   */\n  leastDestructiveRef?: React.RefObject<HTMLElement>;\n  /**\n   * Accepts any renderable content but should generally be restricted to\n   * `AlertDialogLabel`, `AlertDialogDescription` and action buttons, other\n   * content might not be announced to the user by the screen reader.\n   *\n   * @see Docs: https://reacttraining.com/reach-ui/alert-dialog#alertdialog-children\n   */\n  children: React.ReactNode;\n} & DialogProps;\n\nif (__DEV__) {\n  AlertDialog.displayName = \"AlertDialog\";\n  AlertDialog.propTypes = {\n    isOpen: PropTypes.bool,\n    onDismiss: PropTypes.func,\n    leastDestructiveRef: () => null,\n    children: PropTypes.node,\n  };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\ninterface IAlertDialogContext {\n  labelId: string | undefined;\n  descriptionId: string | undefined;\n  overlayRef: React.MutableRefObject<HTMLDivElement | null>;\n  leastDestructiveRef?: React.RefObject<HTMLElement>;\n}\n"],"names":["AlertDialogContext","createNamedContext","AlertDialogOverlay","forwardRef","forwardedRef","leastDestructiveRef","props","ownRef","useRef","ref","useForkedRef","id","useId","labelId","makeId","undefined","descriptionId","React","Provider","value","overlayRef","DialogOverlay","initialFocusRef","AlertDialogContent","children","useContext","useEffect","ownerDocument","getOwnerDocument","current","document","getElementById","invariant","DialogContent","role","isOpen","onDismiss"],"mappings":"6aAiDA,IAAIA,EAAqBC,qBACvB,qBACA,IAgBWC,EAAqBC,cAChC,WAA+DC,OAAjCC,IAAAA,oBAAwBC,+BAChDC,EAASC,SAA8B,MACvCC,EAAMC,eAAaN,EAAcG,GACjCI,EAAKC,QAAMN,EAAMK,IACjBE,EAAUF,EAAKG,SAAO,eAAgBH,QAAMI,EAC5CC,EAAgBL,EAAKG,SAAO,2BAA4BH,QAAMI,SAGhEE,gBAACjB,EAAmBkB,UAClBC,MAAO,CACLN,QAAAA,EACAG,cAAAA,EACAI,WAAYb,EACZF,oBAAAA,IAGFY,gBAACI,iCACKf,GACJG,IAAKA,uCAELa,gBAAiBjB,SAiCdkB,EAAqBpB,cAGhC,WAAoDA,OAAtBqB,IAAAA,SAAalB,sBACQmB,aACjDzB,GADIa,IAAAA,QAASR,IAAAA,oBAAqBe,IAAAA,kBAGpCM,aAAU,eACJC,EAAgBC,mBAAiBR,EAAWS,UAAYC,SACxDjB,IAEAc,EAAcI,eAAelB,IAD/BmB,OAOA3B,GADF2B,QAOC,CAACnB,EAASR,IAEXY,gBAACgB,+BACCC,KAAK,gCACYrB,GACbP,GACJG,IAAKN,+EAKJqB,0BAqFgD,gBACrDb,IAAAA,GACAwB,IAAAA,OACAC,IAAAA,UACA/B,IAAAA,oBACGC,gEAGDW,gBAACf,mBAAuB,CAAEiC,OAAAA,EAAQC,UAAAA,EAAW/B,oBAAAA,EAAqBM,GAAAA,IAChEM,gBAACM,mBAAuBjB,kEA9BzB,SAAAA,SACuBmB,aAAWzB,UAEnCiB,uCAASX,GAAOK,KAFVK,oFAxBL,SAAAV,SACiBmB,aAAWzB,UACxBiB,uCAASX,GAAOK,KADfE"}